# CROWN CHASE ゲーム仕様

## ゲーム概要
- p5.js で描画された等角投影（アイソメ）グリッドを舞台にしたターン制ローグライト風アクション
- プレイヤーは自宅タイルからスタートし、右下のクエスト部屋にある王冠を奪取して持ち帰ることが目的
- 1ターンは「プレイヤー行動 → 敵行動 → ワールド管理」の順で進み、HPが尽きるとゲームオーバー
- 画面左にマップ、右にステータス用パネルを表示。カメラは常にプレイヤーを中央付近へ追従

## 操作方法
- 矢印キー / WASD：1マス移動（行動ごとに短いクールダウン）
- Z：アイテム取得、拠点での預け入れ、指輪装備中の壁操作、装備の地面落とし
- R：ゲームオーバーまたはクリア後のリスタート
- タイトル画面は任意のキー入力で開始

## 勝利条件と敗北条件
- クエスト部屋（マップ右下）で王冠を拾い、自宅タイル（開始位置）で Z キーを押して納品すると勝利
- プレイヤー HP が 0 になるとゲームオーバー。R キーで再挑戦可能

## プレイヤー成長と拠点
- 所持ゴールドは自宅タイルで Z キーを押すと 1 枚につき 20 HP 回復へ変換
- 宝石を装備したまま自宅で預けると基礎攻撃力（baseStr）が +1 され、装備枠が空く
- 剣を取得すると攻撃力が `4 + baseStr` になり、敵へ反撃可能に
- プレイヤー防御力は累計経験値（totalExp）と同値で、被ダメージ軽減に使用
- 敵を攻撃後、同じ方向キーを押し続けると自動追撃（autoAttack）が発生

## アイテム一覧
- コイン：自動取得。拠点で HP 回復に使用
- 宝石：装備枠を使う。拠点預けで攻撃力強化
- 剣：装備枠不要。取得後は常に攻撃可能
- 指輪：装備中は周囲の壁を拾って携帯し、足元に設置可能（Z キー）
- 十字架：装備中は敵を恐れさせ半径 4 マスで後退させる。地面に置いても敵の通行を阻害
- 鍵：扉マスへ移動した際に自動消費して開錠
- 盾：火炎タイル上での即死ダメージを無効化
- 王冠：クエスト部屋で入手。自宅で納品するとクリア

## 敵と進行管理
- 全ての雑魚敵は墓タイル周辺からスポーン。プレイヤーとの距離 6 未満や障害物マスでは出現不可
- 剣未入手時の同時出現上限は 8 体、剣入手後は最大 18 体まで増加
- 敵の種類は進行度（ターン数・プレイヤーレベル・撃破数・剣取得）に応じて段階的にアンロック
- 十字架所持または圧倒的な攻撃力差がある敵はプレイヤーから離れる方向へ移動
- 通常敵は縦横いずれか優先軸に 1 歩移動。詰まった場合はそのターンは移動しない
- ボス（dragon）は初期状態でクエスト部屋に待機し移動しない。撃破すると火炎タイルが消滅

## フィールド構造
- グリッドサイズは 70×50。外周は壁で囲まれ、8 マス間隔で墓タイルが点在
- 自宅タイル（HOME）は初期位置 (8,8)。ここでのみ回復・納品が可能
- ランダムで壁が散在し、指輪と壁操作を活用した道づくりが必要になる場面がある
- 右下のクエスト部屋は 3×5 マスの密閉空間で、入口に扉と火炎マスを設置
- 剣、鍵、盾、十字架はランダム配置。剣は初期視界外に生成されるよう制御
- 敵撃破時はコイン・宝石・十字架のいずれかをランダムドロップ（確率制御あり）

## 画面表示
- 右パネルには HP、経験値、攻撃力、所持ゴールド、装備アイコン、撃破数、敵数を表示
- 戦闘中は直近で戦っている敵とプレイヤーのスプライトを表示し、敵 HP を確認可能
- ゲームオーバー／勝利時は半透明オーバーレイとリスタート案内を表示

## 実行方法
- 同じフォルダにある `index.html` をブラウザで開くとそのままプレイ可能（インターネット接続は p5.js CDN に利用）
